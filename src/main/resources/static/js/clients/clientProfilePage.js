// Generated by CoffeeScript 1.12.7
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  this.ClientProfilePage = (function(superClass) {
    extend(ClientProfilePage, superClass);

    function ClientProfilePage(clientId) {
      ClientProfilePage.__super__.constructor.call(this);
      this.clientId = Number(clientId);
      this.client = null;
      ClientService.get(clientId, null, this, this._loadedClient, this._loadedClientError);
      this.createClientDialog = new CreateClientDialog();
    }

    ClientProfilePage.prototype.getPageTitle = function() {
      return 'Klijent profil';
    };

    ClientProfilePage.prototype.destroy = function() {
      ClientProfilePage.__super__.destroy.call(this);
      this.createClientDialog.destroy();
      return this.createClientDialog = null;
    };

    ClientProfilePage.prototype._clickEventHandler = function(event) {
      var target;
      target = $(event.target);
      if (closest(target, '.js--create--bids')) {
        window.location.hash = 'bids/' + this.clientId;
        return;
      }
      if (closest(target, '.js--back--button')) {
        MainNavigation.back();
        return;
      }
      if (closest(target, '.js--show--orders')) {
        window.location.hash = "client/" + this.clientId + "/orders";
        return;
      }
      if (closest(target, '.js--edit--profile')) {
        this.createClientDialog.show(this.client, this);
      }
    };

    ClientProfilePage.prototype.updatedClient = function(response) {
      return this._loadedClient(response);
    };

    ClientProfilePage.prototype._loadedClient = function(response) {
      this.client = response.data;
      return this.container.html(this._templateHTML(this.client));
    };

    ClientProfilePage.prototype._loadedClientError = function() {
      return console.log('error');
    };

    ClientProfilePage.prototype._templateHTML = function(client) {
      return "<div class='container '> <nav class='nav header justify-content-end pt-3'> <span class='nav-link span-a back-button js--back--button'>Nazad</span> <span class='nav-link span-a js--edit--profile'>Izmeni</span> <span class='nav-link span-a js--show--orders'>Porud≈æbine</span> <span class='nav-link span-a js--create--bids'>Kreiraj porudzbinu</span> </nav> <div class='h-75 pt-5 flex'> <div class='container w-40'> <div class='profile-image h-336'> </div> </div> <div class='container w-60'> <table class='table table-borderless'> <tr> <td class='wc-15'>Ime</td> <td>" + (client.firstName || '/') + "</td> </tr> <tr> <td class='wc-15'>Prezime</td> <td>" + (client.lastName || '/') + "</td> </tr> <tr> <td class='wc-15'>Ulica</td> <td>" + (client.street || '/') + "</td> </tr> <tr> <td class='wc-15'>Broj stana</td> <td>" + (client.buildNumber || '/') + "</td> </tr> <tr> <td class='wc-15'>Grad</td> <td>" + (client.city || '/') + "</td> </tr> <tr> <td class='wc-15'>Telefon</td> <td>" + (client.phoneNumber || '/') + "</td> </tr> <tr> <td class='wc-15'>Email</td> <td>" + (client.email || '/') + "</td> </tr> </table> </div> </div> </div>";
    };

    return ClientProfilePage;

  })(AbstractPage);

}).call(this);
