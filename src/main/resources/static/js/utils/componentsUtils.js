// Generated by CoffeeScript 1.12.7
(function() {
  this.ComponentsUtils = (function() {
    function ComponentsUtils() {}

    ComponentsUtils.CSS_INVALID_INPUT = 'alert-danger';

    ComponentsUtils.POSITIVE_BUTTON = 'js--positive--button';

    ComponentsUtils.NEGATIVE_BUTTON = 'js--negative--button';

    window.closest = function(target, closestTo) {
      return target.closest(closestTo).length > 0;
    };

    window.ajaxCallbackPrintMessage = function(response) {
      return console.log(response.message);
    };

    window.globalSuccessMessage = function(response) {
      return FloatingMessage.success(response.message);
    };

    window.globalErrorMessage = function(response) {
      return FloatingMessage.error(response.message);
    };

    ComponentsUtils.userDetailsFilledHTML = function(user) {
      var emailHTML;
      emailHTML = '/';
      if (user.email) {
        emailHTML = "<a href='mailto:" + user.email + "'>" + user.email + "</a>";
      }
      return "<div class='h-75 pt-5 flex'> <div class='container w-40'> <div class='profile-image h-336'> </div> </div> <div class='container w-60'> <table class='table table-borderless'> <tr> <td class='wc-15'>Ime</td> <td>" + (user.firstName || '/') + "</td> </tr> <tr> <td class='wc-15'>Prezime</td> <td>" + (user.lastName || '/') + "</td> </tr> <tr> <td class='wc-15'>Ulica</td> <td>" + (user.street || '/') + "</td> </tr> <tr> <td class='wc-15'>Broj stana</td> <td>" + (user.buildNumber || '/') + "</td> </tr> <tr> <td class='wc-15'>Grad</td> <td>" + (user.city || '/') + "</td> </tr> <tr> <td class='wc-15'>Telefon</td> <td>" + (user.phoneNumber || '/') + "</td> </tr> <tr> <td class='wc-15'>Email</td> <td>" + emailHTML + "</td> </tr> </table> </div> </div>";
    };

    ComponentsUtils.emptyState = function(message, innerHtml) {
      if (innerHtml == null) {
        innerHtml = '';
      }
      return "<div class='col-5 m-auto h-75 pt-5 text-center'>" + message + "</div> <div class='pt-3'>" + innerHtml + "</div>";
    };

    ComponentsUtils.loadingPage = function() {
      return "";
    };

    ComponentsUtils.getTimeFromMillis = function(millis) {
      var date, day, hour, minutes, month, seconds, year;
      date = new Date(millis);
      year = date.getFullYear();
      month = date.getMonth() + 1;
      day = date.getDate();
      hour = date.getHours();
      minutes = date.getMinutes();
      seconds = date.getSeconds();
      return day + "-" + month + "-" + year + " (" + hour + ":" + minutes + ":" + seconds + ")";
    };

    ComponentsUtils.selectFromAutoSuggestion = function(target, input, dataAttribute, array, container) {
      var a, i, id, len, results;
      id = Number(target.attr(dataAttribute));
      results = [];
      for (i = 0, len = array.length; i < len; i++) {
        a = array[i];
        if (a.id === id) {
          input.attr(dataAttribute, id);
          input.val(a.firstName + ' ' + a.lastName);
          container.addClass('hide');
          break;
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    ComponentsUtils.handleAutoSuggestion = function(input, dataAttribute, array, container, includePhoneNumber, callbackContect, emptyInputCallbackFunction) {
      var a, firstName, helpArray, html, i, inputValue, j, k, lastName, len, len1, len2, phoneNumberArray;
      if (includePhoneNumber == null) {
        includePhoneNumber = false;
      }
      inputValue = input.val();
      input.removeAttr(dataAttribute);
      if (inputValue.length < 1) {
        container.addClass('hide');
        if (emptyInputCallbackFunction) {
          emptyInputCallbackFunction.call(callbackContect);
        }
        return;
      }
      phoneNumberArray = [];
      helpArray = [];
      for (i = 0, len = array.length; i < len; i++) {
        a = array[i];
        inputValue = inputValue.toLowerCase();
        firstName = a.firstName.toLowerCase();
        lastName = a.lastName.toLowerCase();
        if (firstName.toLowerCase().startsWith(inputValue) || lastName.toLowerCase().startsWith(inputValue)) {
          helpArray.push(a);
        }
        if (includePhoneNumber && a.phoneNumber.startsWith(inputValue)) {
          phoneNumberArray.push(a);
        }
      }
      if (helpArray.length === 0 && phoneNumberArray.length === 0) {
        container.addClass('hide');
        return;
      }
      container.html('');
      if (helpArray.length > 0) {
        html = '';
        for (j = 0, len1 = helpArray.length; j < len1; j++) {
          a = helpArray[j];
          html += "<span class='suggestion-item' " + dataAttribute + "='" + a.id + "'>" + a.firstName + " " + a.lastName + "</span>";
        }
        container.append(html);
      }
      if (phoneNumberArray.length > 0) {
        html = '';
        for (k = 0, len2 = phoneNumberArray.length; k < len2; k++) {
          a = phoneNumberArray[k];
          html += "<span class='suggestion-item' " + dataAttribute + "='" + a.id + "'>" + a.phoneNumber + "</span>";
        }
        container.append(html);
      }
      return container.removeClass('hide');
    };

    ComponentsUtils.baseFilter = function() {
      return ComponentsUtils.filterWrapperHTML(ComponentsUtils.filterBaseHTML());
    };

    ComponentsUtils.filterWrapperHTML = function(innerHtml) {
      return "<div class='card-header card bp-4'> <h2 class='mb-0 text-center'> <span  class='span-a btn pointer m-auto js--filters--button' data-toggle='collapse' data-target='#collapseOne'>Filteri</span> </h2> </div> <div id='collapseOne' class='collapse card js--filters--content'> <div class='card-body w-75 m-auto flex'> " + innerHtml + " </div> </div> </div> </div>";
    };

    ComponentsUtils.filterBaseHTML = function() {
      return "<div class='flex-column w-100'> <div class='flex flex-row justify-content-around pb-3'> <div class='flex flex-row w-40'> <label class='mr-2 w-25 d-inline-block'>Pretraži</label> <div class='pos-rel w-100'> <input type='text' class='form-control w-100 input-icon-icon-24 js--filter--as'/> <i class='input-icon-24 search-icon cursor-initial'></i> <div class='suggestion-container js--filter--suggestions pos-abs hide'></div> </div> </div> <div class='flex flex-row w-40'> <label class='mr-2 wc-10'>Status</label> <select class='js--filter--status'> <option value='all' selected >Svi</option> <option value='active'>Zaposlen</option> <option value='deactive'>Otpušten</option> </select> </div> </div> <div class='w-100 flex justify-content-center'> <input type='button' class='btn btn-primary js--filter--reset' value='Restart filter'/> </div> </div>";
    };

    return ComponentsUtils;

  })();

}).call(this);
